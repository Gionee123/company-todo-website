{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/intel/Desktop/cursor%20Ai/Call%20optix%20or%20Dafolks/company_task/src/app/compontent/common/admin/AdminRouteGuard.jsx"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Cookies from \"js-cookie\";\r\n\r\nexport default function AdminRouteGuard({ children }) {\r\n  const router = useRouter();\r\n  useEffect(() => {\r\n    const adminData = Cookies.get(\"admin\");\r\n    console.log(\"AdminRouteGuard - adminData:\", adminData);\r\n\r\n    if (!adminData) {\r\n      console.log(\r\n        \"AdminRouteGuard - No admin data found, redirecting to login\"\r\n      );\r\n      router.replace(\"/admin-panel/login\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const admin = JSON.parse(adminData);\r\n      console.log(\"AdminRouteGuard - Parsed admin:\", admin);\r\n\r\n      if (!admin || !admin.role || admin.role !== \"admin\") {\r\n        console.log(\r\n          \"AdminRouteGuard - Invalid admin role, redirecting to login\"\r\n        );\r\n        router.replace(\"/admin-panel/login\");\r\n      } else {\r\n        console.log(\"AdminRouteGuard - Admin authenticated successfully\");\r\n      }\r\n    } catch (error) {\r\n      console.log(\"AdminRouteGuard - Error parsing admin data:\", error);\r\n      router.replace(\"/admin-panel/login\");\r\n    }\r\n  }, [router]);\r\n  return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAEe,SAAS,gBAAgB,EAAE,QAAQ,EAAE;IAClD,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,YAAY,qJAAA,CAAA,UAAO,CAAC,GAAG,CAAC;QAC9B,QAAQ,GAAG,CAAC,gCAAgC;QAE5C,IAAI,CAAC,WAAW;YACd,QAAQ,GAAG,CACT;YAEF,OAAO,OAAO,CAAC;YACf;QACF;QAEA,IAAI;YACF,MAAM,QAAQ,KAAK,KAAK,CAAC;YACzB,QAAQ,GAAG,CAAC,mCAAmC;YAE/C,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,IAAI,MAAM,IAAI,KAAK,SAAS;gBACnD,QAAQ,GAAG,CACT;gBAEF,OAAO,OAAO,CAAC;YACjB,OAAO;gBACL,QAAQ,GAAG,CAAC;YACd;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,GAAG,CAAC,+CAA+C;YAC3D,OAAO,OAAO,CAAC;QACjB;IACF,GAAG;QAAC;KAAO;IACX,qBAAO;kBAAG;;AACZ","debugId":null}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/intel/Desktop/cursor%20Ai/Call%20optix%20or%20Dafolks/company_task/src/app/%28admin-group%29/admin-panel/users/page.js"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from 'react';\r\nimport AdminRouteGuard from '@/app/compontent/common/admin/AdminRouteGuard';\r\nimport axios from 'axios';\r\nimport baseUrl from \"@/config/api\";\r\n\r\nexport default function AdminUsers() {\r\n  // const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || \"http://localhost:5000\";\r\n  const [pendingUsers, setPendingUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  // Load pending users from API\r\n  useEffect(() => {\r\n    const loadPendingUsers = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await axios.get(`${baseUrl}/api/backend/users/pending-users`);\r\n        console.log('Pending users response:', response.data);\r\n        setPendingUsers(response.data);\r\n      } catch (error) {\r\n        console.error('Error loading pending users:', error);\r\n\r\n        if (error.response) {\r\n          console.error('Server error:', error.response.data);\r\n        } else if (error.request) {\r\n          console.error('Network error:', error.request);\r\n        } else {\r\n          console.error('Other error:', error.message);\r\n        }\r\n        setPendingUsers([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadPendingUsers();\r\n  }, [baseUrl]);\r\n\r\n  // Approve or reject user\r\n  const handleAction = async (id, action) => {\r\n    try {\r\n      setMessage(`Processing ${action}...`);\r\n\r\n      let response;\r\n      if (action === 'approve') {\r\n        response = await axios.post(`${baseUrl}/api/backend/users/approve-user/${id}`);\r\n      } else if (action === 'reject') {\r\n        response = await axios.post(`${baseUrl}/api/backend/users/reject-user/${id}`);\r\n      }\r\n\r\n      console.log(`✅ User ${action}d successfully!`, response.data);\r\n\r\n      // Update local state - remove the user from pending list\r\n      setPendingUsers(prevUsers => prevUsers.filter(user => user._id !== id));\r\n\r\n      setMessage(`User ${action}d successfully!`);\r\n      setTimeout(() => setMessage(\"\"), 3000);\r\n\r\n    } catch (error) {\r\n      console.error(`❌ Error ${action}ing user:`, error);\r\n\r\n      if (error.response) {\r\n        const errorMessage = error.response.data?.message || `Error ${action}ing user`;\r\n        setMessage(errorMessage);\r\n        console.error('Server error:', error.response.data);\r\n      } else if (error.request) {\r\n        setMessage(\"Network error. Please try again.\");\r\n        console.error('Network error:', error.request);\r\n      } else {\r\n        setMessage(`Error ${action}ing user. Please try again.`);\r\n        console.error('Other error:', error.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <AdminRouteGuard>\r\n        <div className=\"min-h-screen bg-gray-50 p-6 flex items-center justify-center\">\r\n          <div className=\"text-xl\">Loading pending users...</div>\r\n        </div>\r\n      </AdminRouteGuard>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AdminRouteGuard>\r\n      <div className=\"min-h-screen bg-gray-50 p-6\">\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          <div className=\"flex justify-between items-center mb-6\">\r\n            <h1 className=\"text-3xl font-bold text-gray-800\">Pending Users</h1>\r\n            <div className=\"text-sm text-gray-600\">\r\n              Pending: {pendingUsers.length}\r\n            </div>\r\n          </div>\r\n\r\n          {message && (\r\n            <div className=\"mb-4 p-3 bg-blue-100 text-blue-700 rounded-md\">\r\n              {message}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"bg-white shadow-md rounded-lg overflow-hidden\">\r\n            <table className=\"min-w-full divide-y divide-gray-200\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    User Info\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Registration Date\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Actions\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {pendingUsers.map((user) => (\r\n                  <tr key={user._id} className=\"hover:bg-gray-50\">\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div>\r\n                        <div className=\"text-sm font-medium text-gray-900\">{user.name}</div>\r\n                        <div className=\"text-sm text-gray-500\">{user.email}</div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                      {new Date(user.createdAt).toLocaleDateString()} {new Date(user.createdAt).toLocaleTimeString()}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                      <div className=\"flex gap-2\">\r\n                        <button\r\n                          className=\"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm transition-colors\"\r\n                          onClick={() => handleAction(user._id, 'approve')}\r\n                        >\r\n                          Approve\r\n                        </button>\r\n                        <button\r\n                          className=\"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm transition-colors\"\r\n                          onClick={() => handleAction(user._id, 'reject')}\r\n                        >\r\n                          Reject\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n\r\n            {pendingUsers.length === 0 && (\r\n              <div className=\"text-center py-8 text-gray-500\">\r\n                <p className=\"text-lg mb-2\">No pending users found</p>\r\n                <p className=\"text-sm\">New registrations will appear here for admin approval</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </AdminRouteGuard>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}