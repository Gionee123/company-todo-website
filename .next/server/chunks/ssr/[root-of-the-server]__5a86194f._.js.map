{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/intel/Desktop/cursor%20Ai/Call%20optix%20or%20Dafolks/company_task/src/config/api.js"],"sourcesContent":["// API Configuration\r\nconst baseUrl = process.env.NEXT_PUBLIC_BASE_URL || \"https://call-optix-or-dafolks.onrender.com\" || \"http://localhost:5000\";\r\n\r\nexport default baseUrl;"],"names":[],"mappings":"AAAA,oBAAoB;;;;AACpB,MAAM,UAAU,kFAAoC,gDAAgD;uCAErF","debugId":null}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/intel/Desktop/cursor%20Ai/Call%20optix%20or%20Dafolks/company_task/src/app/%28website-group%29/login/page.js"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport axios from \"axios\";\r\nimport Link from 'next/link';\r\nimport baseUrl from \"@/config/api\";\r\n\r\nfunction isLoggedIn() {\r\n  if (typeof window === \"undefined\") return false;\r\n  return !!localStorage.getItem('currentUser');\r\n}\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setLoading(true);\r\n\r\n    try {\r\n      // const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || \"http://localhost:5000\";\r\n\r\n\r\n      // API call for login using axios - match the user's API structure\r\n      const response = await axios.post(`${baseUrl}/api/frontend/users/login`, {\r\n        email: email,\r\n        password: password,\r\n        role: 'user' // Add role parameter as required by the controller\r\n      });\r\n\r\n      // Check if login was successful based on user's API response structure\r\n      if (response.data.status === false) {\r\n        setError(response.data.message || \"Login failed. Please check your credentials.\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      // Login successful - store token and user data\r\n      const token = response.data.token;\r\n      const role = response.data.role;\r\n\r\n      // Store user data in localStorage\r\n      const userData = {\r\n        _id: 'user-id', // You might want to decode JWT token to get user ID\r\n        name: email, // You can get name from JWT token or make another API call\r\n        email: email,\r\n        role: role,\r\n        status: 'approved',\r\n        token: token\r\n      };\r\n\r\n      localStorage.setItem('currentUser', JSON.stringify(userData));\r\n\r\n      // Redirect based on role\r\n      if (role === 'admin') {\r\n        window.location.href = '/admin-panel/dashboard';\r\n      } else {\r\n        window.location.href = '/dashboard';\r\n      }\r\n\r\n    } catch (error) {\r\n      // Fallback to demo user login if API fails (for testing purposes)\r\n      if (email === 'demo@example.com' && password === 'demo123') {\r\n        const fallbackUserData = {\r\n          _id: 'demo-user-fallback',\r\n          name: 'Demo User',\r\n          email: 'demo@example.com',\r\n          role: 'user',\r\n          status: 'approved',\r\n          token: 'demo-token'\r\n        };\r\n\r\n        localStorage.setItem('currentUser', JSON.stringify(fallbackUserData));\r\n        window.location.href = '/dashboard';\r\n        return;\r\n      }\r\n\r\n      if (error.response) {\r\n        // Server responded with error status\r\n        const errorMessage = error.response.data?.message || \"Login failed. Please check your credentials.\";\r\n        setError(errorMessage);\r\n      } else if (error.request) {\r\n        // Request was made but no response received\r\n        setError(\"Network error. Please check your connection and try again.\");\r\n      } else {\r\n        // Something else happened\r\n        setError(\"Login failed. Please try again.\");\r\n      }\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAdminLogin = () => {\r\n    router.push('/admin-panel/login');\r\n  };\r\n\r\n  // Hide login form if already logged in\r\n  if (isLoggedIn()) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"bg-white p-8 rounded-lg shadow-md w-full max-w-md\"\r\n      >\r\n        <h1 className=\"text-2xl font-bold mb-6 text-center text-gray-800\">Login</h1>\r\n        {error && (\r\n          <div className=\"mb-6 p-3 bg-red-100 text-red-700 rounded-md text-sm text-center\">{error}</div>\r\n        )}\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-gray-700 mb-2\">Email</label>\r\n          <input\r\n            type=\"email\"\r\n            className=\"w-full border rounded px-3 py-2\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            required\r\n            autoComplete=\"username\"\r\n            disabled={loading}\r\n          />\r\n        </div>\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-gray-700 mb-2\">Password</label>\r\n          <div className=\"relative\">\r\n            <input\r\n              type={showPassword ? \"text\" : \"password\"}\r\n              className=\"w-full border rounded px-3 py-2\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n              autoComplete=\"current-password\"\r\n              disabled={loading}\r\n            />\r\n            <button\r\n              type=\"button\"\r\n              className=\"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-blue-600 underline\"\r\n              onClick={() => setShowPassword((prev) => !prev)}\r\n              tabIndex={-1}\r\n              disabled={loading}\r\n            >\r\n              {showPassword ? \"Hide\" : \"Show\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className={`w-full text-white py-2 rounded transition mb-3 ${loading\r\n            ? 'bg-gray-400 cursor-not-allowed'\r\n            : 'bg-blue-600 hover:bg-blue-700'\r\n            }`}\r\n          disabled={loading}\r\n        >\r\n          {loading ? \"Logging in...\" : \"Login\"}\r\n        </button>\r\n\r\n        {/* Admin Login Option */}\r\n        <div className=\"mb-4\">\r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-0 flex items-center\">\r\n              <div className=\"w-full border-t border-gray-300\"></div>\r\n            </div>\r\n            <div className=\"relative flex justify-center text-sm\">\r\n              <span className=\"px-2 bg-white text-gray-500\">Or</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <button\r\n          type=\"button\"\r\n          onClick={handleAdminLogin}\r\n          className=\"w-full bg-gray-800 text-white py-2 rounded hover:bg-gray-900 transition mb-3\"\r\n          disabled={loading}\r\n        >\r\n          Admin Panel Login\r\n        </button>\r\n\r\n        <div className=\"mt-4 text-center\">\r\n          <Link href=\"/signup\" className=\"text-blue-600 underline\">Don&apos;t have an account? Signup</Link>\r\n          <div className=\"mt-2 text-xs text-gray-500\">\r\n            <p>Demo credentials: demo@example.com / demo123</p>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}