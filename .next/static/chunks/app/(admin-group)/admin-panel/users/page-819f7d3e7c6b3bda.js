(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[977],{1757:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var s=t(5155),n=t(2115),a=t(9016),o=t(3464);function i(){let e="https://company-todo-api.onrender.com",[r,t]=(0,n.useState)([]),[i,c]=(0,n.useState)(!0),[d,l]=(0,n.useState)("");(0,n.useEffect)(()=>{(async()=>{try{c(!0);let r=await o.A.get("".concat(e,"/api/backend/users/pending-users"));console.log("Pending users response:",r.data),t(r.data)}catch(e){console.error("Error loading pending users:",e),e.response?console.error("Server error:",e.response.data):e.request?console.error("Network error:",e.request):console.error("Other error:",e.message),t([])}finally{c(!1)}})()},[e]);let u=async(r,s)=>{try{let n;l("Processing ".concat(s,"...")),"approve"===s?n=await o.A.post("".concat(e,"/api/backend/users/approve-user/").concat(r)):"reject"===s&&(n=await o.A.post("".concat(e,"/api/backend/users/reject-user/").concat(r))),console.log("✅ User ".concat(s,"d successfully!"),n.data),t(e=>e.filter(e=>e._id!==r)),l("User ".concat(s,"d successfully!")),setTimeout(()=>l(""),3e3)}catch(e){if(console.error("❌ Error ".concat(s,"ing user:"),e),e.response){var n;l((null==(n=e.response.data)?void 0:n.message)||"Error ".concat(s,"ing user")),console.error("Server error:",e.response.data)}else e.request?(l("Network error. Please try again."),console.error("Network error:",e.request)):(l("Error ".concat(s,"ing user. Please try again.")),console.error("Other error:",e.message))}};return i?(0,s.jsx)(a.A,{children:(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-xl",children:"Loading pending users..."})})}):(0,s.jsx)(a.A,{children:(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Pending Users"}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Pending: ",r.length]})]}),d&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-blue-100 text-blue-700 rounded-md",children:d}),(0,s.jsxs)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Info"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registration Date"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[new Date(e.createdAt).toLocaleDateString()," ",new Date(e.createdAt).toLocaleTimeString()]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{className:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm transition-colors",onClick:()=>u(e._id,"approve"),children:"Approve"}),(0,s.jsx)("button",{className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm transition-colors",onClick:()=>u(e._id,"reject"),children:"Reject"})]})})]},e._id))})]}),0===r.length&&(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)("p",{className:"text-lg mb-2",children:"No pending users found"}),(0,s.jsx)("p",{className:"text-sm",children:"New registrations will appear here for admin approval"})]})]})]})})})}},5695:(e,r,t)=>{"use strict";var s=t(8999);t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},7231:(e,r,t)=>{Promise.resolve().then(t.bind(t,1757))},7383:(e,r,t)=>{"use strict";function s(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)e[s]=t[s]}return e}t.d(r,{A:()=>n});var n=function e(r,t){function n(e,n,a){if("undefined"!=typeof document){"number"==typeof(a=s({},t,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var i in a)a[i]&&(o+="; "+i,!0!==a[i]&&(o+="="+a[i].split(";")[0]));return document.cookie=e+"="+r.write(n,e)+o}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],s={},n=0;n<t.length;n++){var a=t[n].split("="),o=a.slice(1).join("=");try{var i=decodeURIComponent(a[0]);if(s[i]=r.read(o,i),e===i)break}catch(e){}}return e?s[e]:s}},remove:function(e,r){n(e,"",s({},r,{expires:-1}))},withAttributes:function(r){return e(this.converter,s({},this.attributes,r))},withConverter:function(r){return e(s({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(r)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},9016:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});var s=t(5155),n=t(2115),a=t(5695),o=t(7383);function i(e){let{children:r}=e,t=(0,a.useRouter)();return(0,n.useEffect)(()=>{let e=o.A.get("admin");if(console.log("AdminRouteGuard - adminData:",e),!e){console.log("AdminRouteGuard - No admin data found, redirecting to login"),t.replace("/admin-panel/login");return}try{let r=JSON.parse(e);console.log("AdminRouteGuard - Parsed admin:",r),r&&r.role&&"admin"===r.role?console.log("AdminRouteGuard - Admin authenticated successfully"):(console.log("AdminRouteGuard - Invalid admin role, redirecting to login"),t.replace("/admin-panel/login"))}catch(e){console.log("AdminRouteGuard - Error parsing admin data:",e),t.replace("/admin-panel/login")}},[t]),(0,s.jsx)(s.Fragment,{children:r})}}},e=>{e.O(0,[464,441,964,358],()=>e(e.s=7231)),_N_E=e.O()}]);