(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[952],{207:(e,a,s)=>{"use strict";s.d(a,{Ay:()=>l,fF:()=>t,je:()=>d});var n=s(1990),r=s(7383);let o=(0,n.Z0)({name:"login",initialState:{adminDetails:r.A.get("admin")?JSON.parse(r.A.get("admin")):null},reducers:{saveLoginDetails:(e,a)=>{e.adminDetails=a.payload.admin,r.A.set("admin",JSON.stringify(a.payload.admin))},logOut:e=>{e.adminDetails=null,r.A.set("admin",JSON.stringify(null))}}}),{saveLoginDetails:t,logOut:d}=o.actions,l=o.reducer},210:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>m});var n=s(5155),r=s(2115),o=s(4540),t=s(207),d=s(5695),l=s(3464),i=s(6874),c=s.n(i);function m(){let e="https://company-todo-api.onrender.com";console.log("baseUrl login page",e);let[a,s]=(0,r.useState)(""),[i,m]=(0,r.useState)(""),[u,g]=(0,r.useState)(""),[p,h]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!1),y=(0,d.useRouter)(),N=(0,o.wA)(),f=(0,o.d4)(e=>e.loginStore.adminDetails),w=async s=>{s.preventDefault(),g(""),h(!0);try{console.log("\uD83D\uDD04 Attempting admin login to:","".concat(e,"/api/backend/adminAuth/login")),console.log("\uD83D\uDC64 Username:",a),console.log("\uD83D\uDD11 Password:",i?"[HIDDEN]":"[EMPTY]"),console.log("\uD83D\uDCE4 Request payload:",{adminName:a,adminPassword:i});let s=await l.A.post("".concat(e,"/api/backend/adminAuth/login"),{adminName:a,adminPassword:i});if(console.log("✅ Admin login response:",s.data),console.log("\uD83D\uDCCA Response status:",s.status),console.log("\uD83D\uDCCB Response headers:",s.headers),!1===s.data.success){g(s.data.message||"Login failed. Please check your credentials."),h(!1);return}let n={_id:s.data.admin._id,adminName:s.data.admin.adminName,name:"Admin User",email:"admin@admin.com",role:"admin",status:"approved"};console.log("Login - Admin data to store:",n),document.cookie="admin=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",N((0,t.fF)({admin:n})),console.log("Login - Redirecting to dashboard"),y.push("/admin-panel/dashboard")}catch(e){if(console.error("❌ Admin login error:",e),e.response){let a;if(401===e.response.status)a="Invalid username or password. Please check your credentials.";else if(400===e.response.status)a="Please provide both username and password.";else{var n;a=(null==(n=e.response.data)?void 0:n.message)||"Login failed. Please try again."}g(a),console.error("Server error:",e.response.data)}else e.request?(g("Network error. Please check your connection and try again."),console.error("Network error:",e.request)):(g("Login failed. Please try again."),console.error("Other error:",e.message));h(!1)}};return((0,r.useEffect)(()=>{x(!0);let e=document.cookie.split("; ").find(e=>e.startsWith("admin="));if(e)try{JSON.parse(decodeURIComponent(e.split("=")[1])).role||(console.log("Clearing old admin data without role"),document.cookie="admin=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;")}catch(e){console.log("Error parsing admin data, clearing cookie"),document.cookie="admin=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}},[]),(0,r.useEffect)(()=>{},[b,f,y]),b)?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,n.jsxs)("form",{onSubmit:w,className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"Admin Panel Login"}),u&&(0,n.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:u}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block text-gray-700 mb-2",children:"Username"}),(0,n.jsx)("input",{type:"text",value:a,onChange:e=>s(e.target.value),className:"w-full border rounded px-3 py-2",required:!0,autoComplete:"username",disabled:p,placeholder:"admin"})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{className:"block text-gray-700 mb-2",children:"Password"}),(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)("input",{type:"password",value:i,onChange:e=>m(e.target.value),className:"w-full border rounded px-3 py-2",required:!0,autoComplete:"current-password",disabled:p,placeholder:"admin123"})})]}),(0,n.jsx)("button",{type:"submit",className:"w-full text-white py-2 rounded transition ".concat(p?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),disabled:p,children:p?"Logging in...":"Login"}),(0,n.jsxs)("div",{className:"mt-4 text-center text-sm text-gray-600",children:[(0,n.jsx)("p",{className:"font-semibold mb-2",children:"Admin Credentials:"}),(0,n.jsxs)("p",{children:["Username: ",(0,n.jsx)("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:"admin"})]}),(0,n.jsxs)("p",{children:["Password: ",(0,n.jsx)("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:"admin123"})]}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"✅ Auto-created in database"})]}),(0,n.jsx)(c(),{href:"/login",children:(0,n.jsx)("button",{className:"w-full my-[5px] mx-auto text-white py-2 rounded transition ".concat(p?"bg-gray-400 cursor-not-allowed":"bg-black hover:bg-gray-800"),disabled:p,children:p?"Logging in...":"website login"})})]})}):(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,n.jsx)("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:(0,n.jsxs)("div",{className:"animate-pulse",children:[(0,n.jsx)("div",{className:"h-8 bg-gray-200 rounded mb-6"}),(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-4"}),(0,n.jsx)("div",{className:"h-10 bg-gray-200 rounded mb-4"}),(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-6"}),(0,n.jsx)("div",{className:"h-10 bg-gray-200 rounded"})]})})})}},744:(e,a,s)=>{Promise.resolve().then(s.bind(s,210))}},e=>{e.O(0,[464,874,619,441,964,358],()=>e(e.s=744)),_N_E=e.O()}]);