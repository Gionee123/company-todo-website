(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[160],{4250:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(5155),r=s(2115),l=s(9016);function n(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)([]),[i,d]=(0,r.useState)(!0),[c,o]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=(()=>{let e=JSON.parse(localStorage.getItem("Todolist"))||[],t=JSON.parse(localStorage.getItem("registeredUsers"))||[];o("Found ".concat(e.length," total tasks and ").concat(t.length," registered users"));let s=e.filter(e=>!!e.userId&&!!e.userName||!!e.userEmail&&void 0!==t.find(t=>t.email===e.userEmail));return localStorage.setItem("Todolist",JSON.stringify(s)),s})(),s=JSON.parse(localStorage.getItem("registeredUsers"))||[];t(e.map(e=>{if(!e.userId||!e.userName){let t=s.find(t=>t.email===e.userEmail);if(t)return{...e,userId:t._id,userName:t.name,userEmail:t.email}}return e})),n(s),d(!1)},[]);let m=e.length,x=e.filter(e=>e.isCompleted).length,h=m-x,u=m>0?Math.round(x/m*100):0;if(i)return(0,a.jsx)(l.A,{children:(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-xl",children:"Loading task statistics..."})})});let p=(()=>{let t={};return e.forEach(e=>{let a=e.userId,r=e.userName,l=e.userEmail;if(!a||!r){let t=s.find(t=>t.email===e.userEmail||t._id===e.userId);if(!t)return;a=t._id,r=t.name,l=t.email}t[a]||(t[a]={userName:r,userEmail:l,tasks:[],completed:0,incomplete:0}),t[a].tasks.push(e),e.isCompleted?t[a].completed++:t[a].incomplete++}),t})();return(0,a.jsx)(l.A,{children:(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Client Task Management"}),c&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,a.jsx)("p",{className:"text-blue-800 text-sm",children:c}),(0,a.jsxs)("p",{className:"text-blue-600 text-xs mt-1",children:["Total tasks: ",m," | Registered users: ",s.length," | Client groups: ",Object.keys(p).length]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Tasks"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:m})]})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:x})]})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Incomplete"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:h})]})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completion Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[u,"%"]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Overall Progress"}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-4 rounded-full transition-all duration-500",style:{width:"".concat(u,"%")}})}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mt-2",children:[(0,a.jsxs)("span",{children:[x," completed"]}),(0,a.jsxs)("span",{children:[h," remaining"]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mb-8",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Tasks by Client"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Tasks"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completed"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Incomplete"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completion Rate"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(p).map(e=>{let[t,s]=e,r=s.tasks.length>0?Math.round(s.completed/s.tasks.length*100):0;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3",children:(0,a.jsx)("span",{className:"text-indigo-600 font-semibold text-sm",children:s.userName.charAt(0).toUpperCase()})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:s.userName})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.userEmail}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.tasks.length}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:s.completed})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:s.incomplete})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:(0,a.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"".concat(r,"%")}})}),(0,a.jsxs)("span",{className:"text-sm text-gray-900",children:[r,"%"]})]})})]},t)})})]})}),0===Object.keys(p).length&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("p",{className:"text-lg mb-2",children:"No client tasks found"}),(0,a.jsx)("p",{className:"text-sm",children:"Clients haven't created any tasks yet"}),(0,a.jsx)("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-yellow-800 text-sm",children:"\uD83D\uDCA1 To see client tasks: Register a user, login, and create some tasks"})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Recent Tasks"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Task"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return e.sort((e,t)=>new Date(t.createdAt||0)-new Date(e.createdAt||0)).slice(0,t)})().map((e,t)=>{let r=e.userName,l=e.userEmail;if(!r){let t=s.find(t=>t.email===e.userEmail||t._id===e.userId);t?(r=t.name,l=t.email):(r="Unknown User",l=e.userEmail||"unknown@email.com")}return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-indigo-100 rounded-full flex items-center justify-center mr-2",children:(0,a.jsx)("span",{className:"text-indigo-600 font-semibold text-xs",children:r.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:r}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:l})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full mr-3 ".concat(e.isCompleted?"bg-green-500":"bg-yellow-500")}),(0,a.jsx)("span",{className:"text-sm ".concat(e.isCompleted?"line-through text-gray-500":"text-gray-900"),children:e.Todolist})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.isCompleted?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.isCompleted?"Completed":"Incomplete"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.dueDate?new Date(e.dueDate).toLocaleDateString():"No due date"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"Unknown"})]},t)})})]})}),0===e.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("p",{className:"text-lg mb-2",children:"No tasks found"}),(0,a.jsx)("p",{className:"text-sm",children:"Clients haven't created any tasks yet"})]})]})]})})})}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},6780:(e,t,s)=>{Promise.resolve().then(s.bind(s,4250))},7383:(e,t,s)=>{"use strict";function a(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)e[a]=s[a]}return e}s.d(t,{A:()=>r});var r=function e(t,s){function r(e,r,l){if("undefined"!=typeof document){"number"==typeof(l=a({},s,l)).expires&&(l.expires=new Date(Date.now()+864e5*l.expires)),l.expires&&(l.expires=l.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n="";for(var i in l)l[i]&&(n+="; "+i,!0!==l[i]&&(n+="="+l[i].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+n}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var s=document.cookie?document.cookie.split("; "):[],a={},r=0;r<s.length;r++){var l=s[r].split("="),n=l.slice(1).join("=");try{var i=decodeURIComponent(l[0]);if(a[i]=t.read(n,i),e===i)break}catch(e){}}return e?a[e]:a}},remove:function(e,t){r(e,"",a({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,a({},this.attributes,t))},withConverter:function(t){return e(a({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(s)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},9016:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(5155),r=s(2115),l=s(5695),n=s(7383);function i(e){let{children:t}=e,s=(0,l.useRouter)();return(0,r.useEffect)(()=>{let e=n.A.get("admin");if(console.log("AdminRouteGuard - adminData:",e),!e){console.log("AdminRouteGuard - No admin data found, redirecting to login"),s.replace("/admin-panel/login");return}try{let t=JSON.parse(e);console.log("AdminRouteGuard - Parsed admin:",t),t&&t.role&&"admin"===t.role?console.log("AdminRouteGuard - Admin authenticated successfully"):(console.log("AdminRouteGuard - Invalid admin role, redirecting to login"),s.replace("/admin-panel/login"))}catch(e){console.log("AdminRouteGuard - Error parsing admin data:",e),s.replace("/admin-panel/login")}},[s]),(0,a.jsx)(a.Fragment,{children:t})}}},e=>{e.O(0,[441,964,358],()=>e(e.s=6780)),_N_E=e.O()}]);