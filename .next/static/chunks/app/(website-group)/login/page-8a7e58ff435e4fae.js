(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{5128:(e,t,a)=>{Promise.resolve().then(a.bind(a,5553))},5553:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(5155),r=a(2115),o=a(5695),l=a(3464);function n(){let e=(0,o.useRouter)(),[t,a]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[u,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!1),h=async e=>{e.preventDefault(),c(""),x(!0);try{let e="https://company-todo-api.onrender.com";console.log("\uD83D\uDD04 Attempting login to:","".concat(e,"/api/frontend/users/login")),console.log("\uD83D\uDCE7 Email:",t),console.log("\uD83D\uDD11 Password:",n?"[HIDDEN]":"[EMPTY]");let a=await l.A.post("".concat(e,"/api/frontend/users/login"),{email:t,password:n,role:"user"});if(console.log("✅ Login response:",a.data),!1===a.data.status){c(a.data.message||"Login failed. Please check your credentials."),x(!1);return}let s=a.data.token,r=a.data.role;localStorage.setItem("currentUser",JSON.stringify({_id:"user-id",name:t,email:t,role:r,status:"approved",token:s})),"admin"===r?window.location.href="/admin-panel/dashboard":window.location.href="/dashboard"}catch(e){if(console.error("\uD83D\uDCA5 Login error:",e),"demo@example.com"===t&&"demo123"===n){console.log("✅ Using fallback demo login"),localStorage.setItem("currentUser",JSON.stringify({_id:"demo-user-fallback",name:"Demo User",email:"demo@example.com",role:"user",status:"approved",token:"demo-token"})),window.location.href="/dashboard";return}if(e.response){var a;c((null==(a=e.response.data)?void 0:a.message)||"Login failed. Please check your credentials."),console.error("❌ Server error:",e.response.data)}else e.request?(c("Network error. Please check your connection and try again."),console.error("❌ Network error:",e.request)):(c("Login failed. Please try again."),console.error("❌ Other error:",e.message));x(!1)}};return localStorage.getItem("currentUser")?null:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("form",{onSubmit:h,className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"Login"}),d&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md text-sm text-center",children:d}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 mb-2",children:"Email"}),(0,s.jsx)("input",{type:"email",className:"w-full border rounded px-3 py-2",value:t,onChange:e=>a(e.target.value),required:!0,autoComplete:"username",disabled:g})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-gray-700 mb-2",children:"Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:u?"text":"password",className:"w-full border rounded px-3 py-2",value:n,onChange:e=>i(e.target.value),required:!0,autoComplete:"current-password",disabled:g}),(0,s.jsx)("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-blue-600 underline",onClick:()=>m(e=>!e),tabIndex:-1,disabled:g,children:u?"Hide":"Show"})]})]}),(0,s.jsx)("button",{type:"submit",className:"w-full text-white py-2 rounded transition mb-3 ".concat(g?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),disabled:g,children:g?"Logging in...":"Login"}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,s.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or"})})]})}),(0,s.jsx)("button",{type:"button",onClick:()=>{e.push("/admin-panel/login")},className:"w-full bg-gray-800 text-white py-2 rounded hover:bg-gray-900 transition mb-3",disabled:g,children:"Admin Panel Login"}),(0,s.jsxs)("div",{className:"mt-4 text-center",children:[(0,s.jsx)("a",{href:"/signup",className:"text-blue-600 underline",children:"Don't have an account? Signup"}),(0,s.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:(0,s.jsx)("p",{children:"Demo credentials: demo@example.com / demo123"})})]})]})})}},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})}},e=>{e.O(0,[464,441,964,358],()=>e(e.s=5128)),_N_E=e.O()}]);