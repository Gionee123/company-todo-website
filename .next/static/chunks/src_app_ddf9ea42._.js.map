{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/intel/Desktop/cursor%20Ai/Call%20optix%20or%20Dafolks/company_task/src/app/compontent/common/admin/AdminRouteGuard.jsx"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Cookies from \"js-cookie\";\r\n\r\nexport default function AdminRouteGuard({ children }) {\r\n  const router = useRouter();\r\n  useEffect(() => {\r\n    const adminData = Cookies.get(\"admin\");\r\n    console.log(\"AdminRouteGuard - adminData:\", adminData);\r\n\r\n    if (!adminData) {\r\n      console.log(\r\n        \"AdminRouteGuard - No admin data found, redirecting to login\"\r\n      );\r\n      router.replace(\"/admin-panel/login\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const admin = JSON.parse(adminData);\r\n      console.log(\"AdminRouteGuard - Parsed admin:\", admin);\r\n\r\n      if (!admin || !admin.role || admin.role !== \"admin\") {\r\n        console.log(\r\n          \"AdminRouteGuard - Invalid admin role, redirecting to login\"\r\n        );\r\n        router.replace(\"/admin-panel/login\");\r\n      } else {\r\n        console.log(\"AdminRouteGuard - Admin authenticated successfully\");\r\n      }\r\n    } catch (error) {\r\n      console.log(\"AdminRouteGuard - Error parsing admin data:\", error);\r\n      router.replace(\"/admin-panel/login\");\r\n    }\r\n  }, [router]);\r\n  return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;AAEe,SAAS,gBAAgB,KAAY;QAAZ,EAAE,QAAQ,EAAE,GAAZ;;IACtC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;qCAAE;YACR,MAAM,YAAY,wJAAA,CAAA,UAAO,CAAC,GAAG,CAAC;YAC9B,QAAQ,GAAG,CAAC,gCAAgC;YAE5C,IAAI,CAAC,WAAW;gBACd,QAAQ,GAAG,CACT;gBAEF,OAAO,OAAO,CAAC;gBACf;YACF;YAEA,IAAI;gBACF,MAAM,QAAQ,KAAK,KAAK,CAAC;gBACzB,QAAQ,GAAG,CAAC,mCAAmC;gBAE/C,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,IAAI,MAAM,IAAI,KAAK,SAAS;oBACnD,QAAQ,GAAG,CACT;oBAEF,OAAO,OAAO,CAAC;gBACjB,OAAO;oBACL,QAAQ,GAAG,CAAC;gBACd;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,GAAG,CAAC,+CAA+C;gBAC3D,OAAO,OAAO,CAAC;YACjB;QACF;oCAAG;QAAC;KAAO;IACX,qBAAO;kBAAG;;AACZ;GAhCwB;;QACP,qIAAA,CAAA,YAAS;;;KADF","debugId":null}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/intel/Desktop/cursor%20Ai/Call%20optix%20or%20Dafolks/company_task/src/app/%28admin-group%29/admin-panel/users/page.js"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from 'react';\r\nimport AdminRouteGuard from '@/app/compontent/common/admin/AdminRouteGuard';\r\nimport axios from 'axios';\r\nimport baseUrl from \"@/config/api\";\r\n\r\nexport default function AdminUsers() {\r\n  // const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || \"http://localhost:5000\";\r\n  const [pendingUsers, setPendingUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  // Load pending users from API\r\n  useEffect(() => {\r\n    const loadPendingUsers = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await axios.get(`${baseUrl}/api/backend/users/pending-users`);\r\n        console.log('Pending users response:', response.data);\r\n        setPendingUsers(response.data);\r\n      } catch (error) {\r\n        console.error('Error loading pending users:', error);\r\n\r\n        if (error.response) {\r\n          console.error('Server error:', error.response.data);\r\n        } else if (error.request) {\r\n          console.error('Network error:', error.request);\r\n        } else {\r\n          console.error('Other error:', error.message);\r\n        }\r\n        setPendingUsers([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadPendingUsers();\r\n  }, [baseUrl]);\r\n\r\n  // Approve or reject user\r\n  const handleAction = async (id, action) => {\r\n    try {\r\n      setMessage(`Processing ${action}...`);\r\n\r\n      let response;\r\n      if (action === 'approve') {\r\n        response = await axios.post(`${baseUrl}/api/backend/users/approve-user/${id}`);\r\n      } else if (action === 'reject') {\r\n        response = await axios.post(`${baseUrl}/api/backend/users/reject-user/${id}`);\r\n      }\r\n\r\n      console.log(`✅ User ${action}d successfully!`, response.data);\r\n\r\n      // Update local state - remove the user from pending list\r\n      setPendingUsers(prevUsers => prevUsers.filter(user => user._id !== id));\r\n\r\n      setMessage(`User ${action}d successfully!`);\r\n      setTimeout(() => setMessage(\"\"), 3000);\r\n\r\n    } catch (error) {\r\n      console.error(`❌ Error ${action}ing user:`, error);\r\n\r\n      if (error.response) {\r\n        const errorMessage = error.response.data?.message || `Error ${action}ing user`;\r\n        setMessage(errorMessage);\r\n        console.error('Server error:', error.response.data);\r\n      } else if (error.request) {\r\n        setMessage(\"Network error. Please try again.\");\r\n        console.error('Network error:', error.request);\r\n      } else {\r\n        setMessage(`Error ${action}ing user. Please try again.`);\r\n        console.error('Other error:', error.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <AdminRouteGuard>\r\n        <div className=\"min-h-screen bg-gray-50 p-6 flex items-center justify-center\">\r\n          <div className=\"text-xl\">Loading pending users...</div>\r\n        </div>\r\n      </AdminRouteGuard>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AdminRouteGuard>\r\n      <div className=\"min-h-screen bg-gray-50 p-6\">\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          <div className=\"flex justify-between items-center mb-6\">\r\n            <h1 className=\"text-3xl font-bold text-gray-800\">Pending Users</h1>\r\n            <div className=\"text-sm text-gray-600\">\r\n              Pending: {pendingUsers.length}\r\n            </div>\r\n          </div>\r\n\r\n          {message && (\r\n            <div className=\"mb-4 p-3 bg-blue-100 text-blue-700 rounded-md\">\r\n              {message}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"bg-white shadow-md rounded-lg overflow-hidden\">\r\n            <table className=\"min-w-full divide-y divide-gray-200\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    User Info\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Registration Date\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Actions\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {pendingUsers.map((user) => (\r\n                  <tr key={user._id} className=\"hover:bg-gray-50\">\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div>\r\n                        <div className=\"text-sm font-medium text-gray-900\">{user.name}</div>\r\n                        <div className=\"text-sm text-gray-500\">{user.email}</div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                      {new Date(user.createdAt).toLocaleDateString()} {new Date(user.createdAt).toLocaleTimeString()}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                      <div className=\"flex gap-2\">\r\n                        <button\r\n                          className=\"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm transition-colors\"\r\n                          onClick={() => handleAction(user._id, 'approve')}\r\n                        >\r\n                          Approve\r\n                        </button>\r\n                        <button\r\n                          className=\"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm transition-colors\"\r\n                          onClick={() => handleAction(user._id, 'reject')}\r\n                        >\r\n                          Reject\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n\r\n            {pendingUsers.length === 0 && (\r\n              <div className=\"text-center py-8 text-gray-500\">\r\n                <p className=\"text-lg mb-2\">No pending users found</p>\r\n                <p className=\"text-sm\">New registrations will appear here for admin approval</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </AdminRouteGuard>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}